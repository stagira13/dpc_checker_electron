# DPCチェッカー Electron版 ver 0.1

Dファイル・EFファイルをロードし、SQLiteデータベースに登録して
クエリを発行するアプリケーションです。
現在はデータ識別番号／入院年月日別の出来高対比、退院処方の入力ミスチェックなどの
機能を実装しています。Windows用アプリケーションです。
わりと未完成なので、バージョンは0.1としてあります。


## 使用方法

### 起動
[こちら](https://github.com/stagira13/dpc_checker_electron/releases)に実行可能なアプリケーションを用意してあります。  
dpc-win32-x64.zipをダウンロードし、任意の場所に展開してください。  
`dpc.exe`をクリックすると、アプリケーションが起動します。
![top](https://cloud.githubusercontent.com/assets/20499723/23747405/e19e42a2-0502-11e7-81e2-5351e942c998.jpg)

### ファイル登録
  
EFファイル（ヘッダ付きのみ対応）、Dファイル（ヘッダなしのみ対応）を用意して、データの登録を行ってください。  

![submit](https://cloud.githubusercontent.com/assets/20499723/23747404/e1891fb2-0502-11e7-98be-5e4c274aea23.jpg)

このアプリケーションは、ローカルでサーバーを起動し、ウェブサイトとして表示するものです。ブラウザによっては「アップロード中」のような表示が出ますが、外部への接続などは一切行われません。  
データはアプリケーションフォルダ直下の`dpc.db`ファイルに保存されます。  
何か問題があれば、`dpc.db`ファイルを削除すると直るかも知れません。
（削除しても、登録データが消えるだけで、次回起動時に空のファイルが自動作成されます）  

### クエリ発行、ダッシュボード

![query](https://cloud.githubusercontent.com/assets/20499723/23747406/e1a1393a-0502-11e7-9273-0fc8a3c613c3.jpg)

クエリ発行ページからは、好きなクエリを選択して実行することが可能です。  
実行後、CSVダウンロードリンクをクリックすると、CSV形式のデータを取得出来ます。  
現在、データの可視化を行うダッシュボード画面を開発中です。


## 更新履歴

### ver 0.1　本アプリケーションを公開。
元々はPythonで書かれていたDPCチェッカーの移植版です。  
ほぼ機能はそのままですが、Electronを使いアプリケーションとして配布可能になりました。  

## 既知の問題点/未実装機能

- グラフによるデータの可視化　未実装 
- 特定の病棟を除外する機能　未実装（考え中）
- 複数月にまたがるデータの登録　未実装（方針未決定）

## 使用ライブラリ

- express
- ejs
- electron
- jquery
- Material Design Lite
- D3.js
- C3.js
- Node.js
- tableify
- express-busboy
- sqlite3
- json2csv
- iconv-lite